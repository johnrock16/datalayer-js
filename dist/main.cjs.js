var h=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var L=Object.prototype.hasOwnProperty;var N=(s,n)=>{for(var i in n)h(s,i,{get:n[i],enumerable:!0})},w=(s,n,i,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let e of F(n))!L.call(s,e)&&e!==i&&h(s,e,{get:()=>n[e],enumerable:!(t=_(n,e))||t.enumerable});return s};var P=s=>w(h({},"__esModule",{value:!0}),s);var k={};N(k,{createDataLayerManager:()=>O,dataLayerFunctions:()=>A});module.exports=P(k);function d(s,n){let i=s.split(/\.|\[|\]/).filter(Boolean),t=n;for(let e of i)if(t!=null){let p=Number(e);!isNaN(p)&&Array.isArray(t)?t=t[p]:t=t[e]}else return;return t}function x(s,n,i){let t=s.split(/\.|\[|\]/).filter(Boolean),e=i;for(let a=0;a<t.length-1;a++){let f=t[a],l=Number(f);!isNaN(l)&&Array.isArray(e)?(e[l]===void 0&&(e[l]={}),e=e[l]):(e[f]===void 0&&(e[f]={}),e=e[f])}let p=t[t.length-1],y=Number(p);!isNaN(y)&&Array.isArray(e)?e[y]=n:e[p]=n}function A(s,n,i){let t=n,e=t.eventDetails,p=s,y=i,a={event:p,previousFunctionReturn:null},f=(r,o,u=!0)=>{a[r]=o,u&&(a.previousFunctionReturn={name:r,state:o})},l=(r,o,u)=>{if(typeof r=="string"){if(r.indexOf("w__")===0)return d(r.split("w__")[1],y);if(r.indexOf("e__")===0)return d(r.split("e__")[1],o.event);if(r.indexOf("c__")===0){let c=r.split("__");return u!==null&&(c[1]=c[1].replace("[]",`[${u}]`)),d(c[1],o)}}return r},g=(r,o,u=null)=>{if(Array.isArray(r))return r.map((c,m)=>g(c,o,m));if(typeof r=="object"&&r!==null){let c={};return Object.keys(r).forEach(m=>{c[m]=g(r[m],o,u)}),c}return l(r,o,u)},D=(r=!0)=>{let o={},u=a.data?a.data:e;return Object.keys(u).forEach(c=>{o[c]=g(u[c],a)}),r&&f("getData",o),o};return{state:a,template:t,eventDetails:e,window:y,setState:f,pushData:()=>{let r=D(!1);y.dataLayer.push(r)},getData:D,createArrayTemplate:()=>{let[r]=t==null?void 0:t.parameters.createArrayTemplate[0],o=d(r,e);x(r,a[a.previousFunctionReturn.name].map(()=>o[0]),e),t==null||t.parameters.createArrayTemplate.shift()}}}function O(s,n,i,t){let e=A(s,n,i);return t.reduce((y,a)=>{let f=a(e);return{...y,...f}},{...e})}0&&(module.exports={createDataLayerManager,dataLayerFunctions});
